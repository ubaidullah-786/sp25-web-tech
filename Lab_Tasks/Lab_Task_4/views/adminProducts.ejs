<div class="products-header">
  <h1 class="admin-title">Product Management</h1>
  <a href="/admin/products/addForm" class="btn">Add New Product</a>
</div>

<% if (products && products.length > 0) { %>
<table class="products-table">
  <thead>
    <tr>
      <th>Image</th>
      <th>Title</th>
      <th>Price</th>
      <th>Colors</th>
      <th>Created</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% products.forEach(product => { %>
    <tr>
      <td>
        <div class="product-image-preview g-img <%= product.image %>"></div>
      </td>
      <td><%= product.title %></td>
      <td>$<%= product.price.toFixed(2) %></td>
      <td>
        <div class="product-colors">
          <% if (product.colors && product.colors.length > 0) { %> <%
          product.colors.forEach(color => { %>
          <span class="color-badge"><%= color %></span>
          <% }) %> <% } else { %>
          <span class="color-badge">No colors</span>
          <% } %>
        </div>
      </td>
      <td><%= new Date(product.createdAt).toLocaleDateString() %></td>
      <td>
        <div class="actions">
          <a href="/admin/products/edit/<%= product._id %>" class="btn btn-sm"
            >Edit</a
          >
          <form
            class="delete-form"
            action="/admin/products/delete/<%= product._id %>"
            method="POST"
            onsubmit="return confirm('Are you sure you want to delete this product?')"
          >
            <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </div>
      </td>
    </tr>
    <% }) %>
  </tbody>
</table>
<% } else { %>
<div class="empty-state">
  <h3>No Products Found</h3>
  <p>You haven't added any products yet. Start by adding your first product.</p>
  <a href="/admin/products/addForm" class="btn">Add Your First Product</a>
</div>
<% } %>

<style>
  .products-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 3rem;
  }

  .products-table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 1.2rem;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  }

  .products-table th {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 2rem;
    text-align: left;
    font-weight: 600;
    font-size: 1.4rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .products-table td {
    padding: 2rem;
    border-bottom: 1px solid #e5e7eb;
    font-size: 1.4rem;
  }

  .products-table tr:last-child td {
    border-bottom: none;
  }

  .products-table tr:hover {
    background: rgba(102, 126, 234, 0.05);
  }

  .product-image-preview {
    width: 6rem;
    height: 6rem;
    border-radius: 0.8rem;
    background-size: cover;
    background-position: center;
    border: 2px solid #e5e7eb;
  }

  .product-colors {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  .color-badge {
    padding: 0.4rem 0.8rem;
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
    border-radius: 0.4rem;
    font-size: 1.2rem;
    font-weight: 500;
  }

  .actions {
    display: flex;
    gap: 1rem;
    align-items: center;
  }

  .btn-sm {
    padding: 0.8rem 1.6rem;
    font-size: 1.2rem;
  }

  .delete-form {
    display: inline;
  }

  .empty-state {
    text-align: center;
    padding: 6rem 2rem;
    color: #6b7280;
  }

  .empty-state h3 {
    font-size: 2rem;
    margin-bottom: 1rem;
    color: #374151;
  }

  .empty-state p {
    font-size: 1.4rem;
    margin-bottom: 2rem;
  }
</style>
<script>
  // Add product image CSS classes
  const style = document.createElement('style');
  style.textContent = `
    .g-img {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    .first-img { background-image: url('/assets/img/first-img.jpg'); }
    .first-img:hover { background-image: url('/assets/img/first-img-hover.jpg'); }
    .second-img { background-image: url('/assets/img/second-img.jpg'); }
    .second-img:hover { background-image: url('/assets/img/second-img-hover.jpg'); }
    .third-img { background-image: url('/assets/img/third-img.jpg'); }
    .third-img:hover { background-image: url('/assets/img/third-img-hover.jpg'); }
    .fourth-img { background-image: url('/assets/img/fourth-img.jpg'); }
    .fourth-img:hover { background-image: url('/assets/img/fourth-img-hover.jpg'); }
    .fifth-img { background-image: url('/assets/img/fifth-img.jpg'); }
    .fifth-img:hover { background-image: url('/assets/img/fifth-img-hover.jpg'); }
    .sixth-img { background-image: url('/assets/img/sixth-img.jpg'); }
    .sixth-img:hover { background-image: url('/assets/img/sixth-img-hover.jpg'); }
    .seventh-img { background-image: url('/assets/img/seventh-img.jpg'); }
    .seventh-img:hover { background-image: url('/assets/img/seventh-img-hover.jpg'); }
    .eigth-img { background-image: url('/assets/img/eighth-img.jpg'); }
    .eigth-img:hover { background-image: url('/assets/img/eighth-img-hover.jpg'); }
  `;
  document.head.appendChild(style);
</script>
